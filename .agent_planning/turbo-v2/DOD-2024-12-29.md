# Definition of Done: Turbo Mode V2 - Phase 0

## Scope: Validation Infrastructure

Before writing any turbo v2 code, establish ground truth for measuring quality.

---

## Acceptance Criteria

### 1. Canonical Library Selection
- [ ] **Tiny** (<500 lines): Identified and source obtained
- [ ] **Small** (<2000 lines): Identified and source obtained
- [ ] **Medium** (<5000 lines): Identified and source obtained
- [ ] All libraries have well-named variables (good ground truth)
- [ ] Original source files stored in `test-samples/canonical/<name>/original.js`

### 2. Minified Sample Generation
- [ ] Each library minified using terser (standard minifier)
- [ ] Minified files stored in `test-samples/canonical/<name>/minified.js`
- [ ] Minification settings documented (for reproducibility)
- [ ] Sanity check: minified code is significantly smaller

### 3. Comparison Pipeline
- [ ] Script: `scripts/compare-unminified.ts` (or similar)
- [ ] Input: original file path, unminified file path
- [ ] Output metrics:
  - Identifier count (original vs unminified)
  - Name match rate (exact matches)
  - Structural validity (parses correctly)
- [ ] Can run: `npm run compare <original> <unminified>`

### 4. Baseline Measurement
- [ ] Run existing humanify (sequential, no turbo) on each minified sample
- [ ] Store baseline scores in `test-samples/canonical/<name>/baseline-scores.json`
- [ ] Document: what is the current quality bar?

---

## Directory Structure

```
test-samples/
└── canonical/
    ├── tiny-<name>/
    │   ├── original.js
    │   ├── minified.js
    │   ├── unminified.js (generated)
    │   └── baseline-scores.json
    ├── small-<name>/
    │   └── ...
    └── medium-<name>/
        └── ...

scripts/
└── compare-unminified.ts
```

---

## Validation

- [ ] Can generate minified from original (reproducible)
- [ ] Comparison script runs and produces scores
- [ ] Baseline scores recorded for all 3 samples
- [ ] Documentation: how to run the comparison pipeline

---

## Success Criteria

Phase 0 is complete when:
1. Three canonical samples exist (tiny, small, medium)
2. Each has original + minified pairs
3. Comparison script works and produces metrics
4. Baseline scores recorded
5. Future phases can trivially measure quality against baseline
